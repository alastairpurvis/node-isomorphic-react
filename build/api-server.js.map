{"version":3,"sources":["webpack:///webpack/bootstrap fb2d13922030e97ecc2d","webpack:///./servers/api/index.js","webpack:///./servers/api/config.js","webpack:///external \"lodash\"","webpack:///./servers/constants.js","webpack:///external \"babel-runtime/helpers/extends\"","webpack:///./servers/api/Logger.js","webpack:///./servers/api/email/index.js","webpack:///./servers/api/middleware/email.js","webpack:///external \"babel-runtime/core-js/json/stringify\"","webpack:///./servers/api/email/sendEmail.js","webpack:///./servers/api/middleware/allowCrossDomain.js","webpack:///./servers/api/middleware/allowMethods.js","webpack:///./servers/api/middleware/invoice.js","webpack:///./servers/api/middleware/store.js","webpack:///./servers/config.js","webpack:///./src/constants/statusCodes.js","webpack:///./src/utils/email.js","webpack:///external \"apicache\"","webpack:///external \"aws-sdk\"","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"babel-runtime/helpers/typeof\"","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"handlebars\"","webpack:///external \"html-pdf\"","webpack:///external \"moment\"","webpack:///external \"path\"","webpack:///external \"schema-client\""],"names":["server","global","cache","middleware","use","get","urlencoded","extended","json","listen","api","PORT","console","log","headers","accessControl","ALLOW_ORIGIN","ALLOW_HEADERS","ALLOW_METHODS","aws","FROM","REGION","SELLERS","auth","facebook","id","secret","schemaIO","clientId","clientSecret","protocol","host","accessKeyId","secretAccessKey","statusCodes","OK","BAD_REQUEST","PAGE_NOT_FOUND","INTERNAL_ERROR","SEC_DELIMITER","Logger","req","params","time","statusCode","statusText","Date","method","toUpperCase","baseUrl","path","data","resetPassword","subject","registration","order","invoice","receipt","templates","result","item","key","dirname","__dirname","split","fileData","join","template","compile","email","res","body","type","attachments","destinations","content","getRawEmailContent","err","send","html","memo","name","attachmentName","sendEmail","ses","SES","region","cb","Source","Destinations","parseEmailAddresses","RawMessage","Data","sendRawEmail","allowCrossDomain","next","set","allowMethods","sendStatus","options","format","logger","receiptTemplate","invoiceTemplate","modifiedData","date_created","invoiceHtml","receiptHtml","add","create","toBuffer","errInvoice","datInvoice","errReceipt","datReceipt","toString","schemaClient","Client","API_PATH","isGetMethod","getParams","query","constParams","interface","param","createFilterParams","category_id","push","filter","manufacturers_ids","$or","categories_ids","$and","callback","startTime","getTime","toLowerCase","modelPath","then","endTime","status","toJSON","catch","error","errors","url","store","route","all","fields","limit","active","expand","replace","pathParams","password_reset_code","post","put","delete","closed","account_id","servers","process","env","static","HOST","buildEmailBodyMarkup","buildEmailAttachmentMarkup","Buffer"],"mappings":"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","file":"api-server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fb2d13922030e97ecc2d","import express from 'express';\nimport cookieParser from 'cookie-parser';\nimport apicache from 'apicache';\nimport bodyParser from 'body-parser';\nimport allowCrossDomain from './middleware/allowCrossDomain';\nimport allowMethods from './middleware/allowMethods';\nimport email from './middleware/email';\nimport mountStoreApi from './middleware/store';\nimport serversConfig from '../config';\nimport invoice from './middleware/invoice';\n\nconst server = global.server = express();\n//apicache.options({ debug: true })\nlet cache = apicache.middleware;\n\n// Register Node.js middleware\nserver.use(allowCrossDomain);\nserver.use(allowMethods);\n\nserver.use(cookieParser());\nserver.get('/api/products/', cache('2 weeks'));\nserver.get('/api/categories/', cache('2 weeks'));\nserver.get('/api/product/', cache('2 weeks'));\nserver.use(bodyParser.urlencoded({ extended: true }));\nserver.use(bodyParser.json());\n\nserver.use('/api/email', email);\nserver.use('/api/invoice', invoice);\n\nmountStoreApi(server);\n\n// Launch the server\nserver.listen(serversConfig.api.PORT, () => {\n    console.log(`The API server is running at port ${serversConfig.api.PORT}`);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/index.js","export const\n    headers = {\n        accessControl: {\n            ALLOW_ORIGIN: '*',\n            ALLOW_HEADERS: 'Content-Type, Authorization, Content-Length, X-Requested-With',\n            ALLOW_METHODS: 'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n        }\n    },\n    aws = {\n        FROM: '<your_aws.from>',\n        REGION: '<your_aws.region>',\n        SELLERS: '<your_aws.sellers>' // string or array of emails\n    },\n    auth = {\n        // https://developers.facebook.com/\n        facebook: {\n            id: '<your_facebook_app_id>',\n            secret: '<your_facebook_app_secret>'\n        },\n\n        // https://schema.io\n        schemaIO: {\n            clientId: 'angularcommerce',\n            clientSecret: 'qww4HTd6rDDEZcDLMZBahLce2wehQCEk',\n            protocol: 'https://',\n            host: 'api.schema.io'\n        },\n\n        aws: {\n            accessKeyId: '<your_aws_access_key_id>',\n            secretAccessKey: '<your_aws_secre_access_key>'\n        }\n    };\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/config.js","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 2\n// module chunks = 0","export const statusCodes = {\n    OK: 200,\n    BAD_REQUEST: 400,\n    PAGE_NOT_FOUND: 404,\n    INTERNAL_ERROR: 500\n};\n\n\n\n// WEBPACK FOOTER //\n// ./servers/constants.js","module.exports = require(\"babel-runtime/helpers/extends\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/extends\"\n// module id = 4\n// module chunks = 0","import statusCodes from '../../src/constants/statusCodes';\n\nconst SEC_DELIMITER = 1000;\n\nclass Logger {\n    add({ req, params, time, statusCode }) {\n        const statusText = statusCode === statusCodes.OK ? 'SUCCESS' : 'FAIL';\n\n        console.log(`[${statusText}] [${new Date()}]\n            method: ${req.method.toUpperCase()},\n            path: ${req.baseUrl + req.path},\n            params: ${JSON.stringify(params)},\n            time: ${time / SEC_DELIMITER} ms`);\n    }\n}\n\nexport default Logger;\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/Logger.js","import { readFileSync } from 'fs';\nimport handlebars from 'handlebars';\nimport path from 'path';\nimport { reduce } from 'lodash';\n\nconst\n    data = {\n        resetPassword: {\n            path: './email/templates/resetPassword.html',\n            subject: 'Reset Password'\n        },\n        registration: {\n            path: './email/templates/registration.html',\n            subject: 'Thanks for the registration!'\n        },\n        order: {\n            path: './email/templates/order.html',\n            subject: 'Order'\n        },\n        invoice: {\n            path: './email/templates/invoice.html',\n            subject: 'Order Invoice'\n        },\n        receipt: {\n            path: './email/templates/receipt.html',\n            subject: 'Receipt'\n        }\n    },\n    templates = reduce(data, (result, item, key) => {\n        const\n            dirname = __dirname.split('email'),\n            fileData = readFileSync(path.join(dirname[0], item.path), 'utf-8');\n\n        result[key] = {\n            subject: item.subject,\n            template: handlebars.compile(fileData)\n        };\n\n        return result;\n    }, {});\n\nexport default templates;\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/email/index.js","import templates from '../email';\nimport { sendEmail } from '../email/sendEmail';\nimport { buildEmailBodyMarkup, buildEmailAttachmentMarkup } from '../../../src/utils/email';\nimport { isEmpty, reduce, isArray, split } from 'lodash';\n\nfunction email(req, res) {\n    const\n        { type, email, data, attachments = [] } = req.body,\n        { template, subject } = templates[type];\n\n    sendEmail({\n        destinations: email,\n        content: getRawEmailContent(subject, template(data), attachments)\n    },(err, data) => err ? res.send(err) : res.send(data))\n}\n\nfunction getRawEmailContent(subject, html, attachments) {\n    const body = buildEmailBodyMarkup({ subject, html });\n\n    if (isEmpty(attachments)) {\n        return body;\n    } else {\n        return reduce(attachments, (memo, { name, content }) => {\n            memo += buildEmailAttachmentMarkup({\n                attachmentName: name,\n                content\n            });\n\n            return memo;\n        }, body) + `\n\n--boundary--`;\n    }\n}\n\nexport default email;\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/middleware/email.js","module.exports = require(\"babel-runtime/core-js/json/stringify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/json/stringify\"\n// module id = 8\n// module chunks = 0","import AWS from 'aws-sdk';\nimport { auth, aws } from '../config';\nimport { isArray, split } from 'lodash';\n\nconst ses = new AWS.SES({\n    ...auth.aws,\n    region: aws.REGION\n});\n\nexport function sendEmail({\n    destinations = [],\n    content = ''\n}, cb = () => null) {\n    const params = {\n        Source: aws.FROM,\n        Destinations: parseEmailAddresses(destinations),\n        RawMessage: {\n            Data: content\n        }\n    };\n\n    ses.sendRawEmail(params, cb);\n}\n\nfunction parseEmailAddresses(destinations) {\n    if (isArray(destinations)) {\n        return destinations;\n    } else {\n        return split(destinations, ',');\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/email/sendEmail.js","import { headers } from '../config';\n\nfunction allowCrossDomain(req, res, next) {\n    res.set('Access-Control-Allow-Origin', headers.accessControl.ALLOW_ORIGIN);\n    res.set('Access-Control-Allow-Headers', headers.accessControl.ALLOW_HEADERS);\n    next();\n}\n\nexport default allowCrossDomain;\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/middleware/allowCrossDomain.js","import { statusCodes } from '../../constants';\nimport { headers } from '../config';\n\nfunction allowMethods(req, res, next) {\n    if (req.method === 'OPTIONS') {\n        res.set('Access-Control-Allow-Methods', headers.accessControl.ALLOW_METHODS);\n\n        res.sendStatus(statusCodes.OK);\n    } else {\n        next();\n    }\n};\n\nexport default allowMethods;\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/middleware/allowMethods.js","import templates from '../email';\nimport { statusCodes } from '../../constants';\nimport pdf from 'html-pdf';\nimport sendEmail from './email.js';\nimport moment from 'moment';\nimport Logger from '../Logger';\nimport { aws } from '../config';\n\nconst\n    options = {\n        format: 'Letter'\n    },\n    logger = new Logger();\n\nfunction invoice(req, res) {\n    const\n        { data } = req.body,\n        receiptTemplate = templates['receipt'].template,\n        invoiceTemplate = templates['invoice'].template,\n        modifiedData = {\n            ...data,\n            date_created: moment(data.date_created).format('YYYY-MM-DD')\n        },\n        invoiceHtml = invoiceTemplate(modifiedData),\n        receiptHtml = receiptTemplate(modifiedData);\n\n    logger.add({\n        req,\n        params: req.body,\n        statusCode: statusCodes.OK,\n        time: 0\n    });\n\n    pdf\n        .create(invoiceHtml, options)\n        .toBuffer((errInvoice, datInvoice) => {\n            if (!errInvoice) {\n                pdf\n                    .create(receiptHtml, options)\n                    .toBuffer((errReceipt, datReceipt) => {\n                        if (!errReceipt) {\n                            req.body.attachments = [\n                                { content: datInvoice.toString('base64'), name: 'invoice.pdf' },\n                                { content: datReceipt.toString('base64'), name: 'receipt.pdf' }\n                            ];\n                            req.body.data = modifiedData;\n                            req.body.email = aws.SELLERS;\n\n                            sendEmail(req, res);\n                        } else {\n                            console.log('Cannot create receipt pdf');\n                            console.log(errReceipt);\n                        }\n                    });\n            } else {\n                console.log('Cannot create invoice pdf');\n                console.log(errInvoice);\n            }\n        });\n}\n\nexport default invoice;\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/middleware/invoice.js","import { statusCodes } from '../../constants';\nimport { auth } from '../config';\nimport Logger from '../Logger';\nimport schemaIO from 'schema-client';\nimport {\n    reduce,\n    includes,\n    isEmpty,\n    map,\n    isUndefined,\n    trim\n} from 'lodash';\n\nconst\n    schemaClient = new schemaIO.Client(auth.schemaIO.clientId, auth.schemaIO.clientSecret),\n    logger = new Logger(),\n    API_PATH = '/api';\n\nfunction isGetMethod({ method }) {\n    return method === 'GET';\n}\n\nfunction getParams(req) {\n    const\n        params = isGetMethod(req) ? req.query : req.body,\n        constParams = req.constParams || {};\n\n    if (isUndefined(req.interface)) {\n        return {\n            ...params,\n            ...constParams\n        };\n    }\n\n    return reduce(params, (memo, param, key) => {\n        if (includes(req.interface, key)) {\n            memo[key] = param;\n        }\n\n        return memo;\n    }, constParams);\n}\n\nfunction createFilterParams({ query }) {\n    let result = [];\n\n    if (query.category_id) {\n        result.push({ 'category_index.id': query.category_id });\n\n        if (!isEmpty(query.filter)) {\n            query.filter.manufacturers_ids && result.push({\n                $or: map(query.filter.manufacturers_ids, id => ({ 'category_index.id': id }))\n            });\n            query.filter.categories_ids && result.push({\n                $or: map(query.filter.categories_ids, id => ({ 'category_index.id': id }))\n            });\n        }\n    }\n\n    return isEmpty(result) ? {} : { $and: result };\n}\n\nfunction callback(req, res) {\n    const\n        startTime = new Date().getTime(),\n        params = getParams(req);\n\n    schemaClient[req.method.toLowerCase()](req.modelPath, params)\n        .then(data => {\n            const endTime = new Date().getTime();\n\n            res\n                .set('Content-Type', 'application/json')\n                .status(statusCodes.OK)\n                .send(data.toJSON());\n\n            logger.add({\n                req,\n                params,\n                statusCode: statusCodes.OK,\n                time: endTime - startTime\n            });\n        })\n        .catch(error => {\n            const endTime = new Date().getTime();\n\n            if (typeof error === 'object') {\n                res.status(statusCodes.BAD_REQUEST).send(JSON.stringify(error));\n            } else {\n                res.status(statusCodes.BAD_REQUEST).send({\n                    errors: {\n                        url: error\n                    }\n                });\n            }\n\n            logger.add({\n                req,\n                params,\n                statusCode: statusCodes.BAD_REQUEST,\n                time: endTime - startTime\n            });\n        });\n}\n\nfunction store(server) {\n\n    // Categories\n    server\n        .route(API_PATH + '/categories')\n        .all((req, res, next) => {\n            req.modelPath = '/categories';\n            req.interface = [\n                'active',\n                'navigation',\n                'type',\n                'slug'\n            ];\n            req.constParams = {\n                fields: [\n                    'active',\n                    'id',\n                    'slug',\n                    'parent_id',\n                    'name',\n                    'type',\n                    'navigation',\n                    'sizes'\n                ],\n                limit: -1,\n                active: true\n            };\n\n            next();\n        })\n        .get(callback);\n\n    // Products\n    server\n        .route(API_PATH + '/products')\n        .all((req, res, next) => {\n            req.modelPath = '/products';\n            req.interface = [\n                'limit',\n                'page',\n                'active'\n            ];\n            req.constParams = {\n                fields: [\n                    'categories',\n                    'manufacturer_name',\n                    'currency',\n                    'description',\n                    'summary',\n                    'id',\n                    'images',\n                    'name',\n                    'options',\n                    'price',\n                    'runway',\n                    'season',\n                    'slug',\n                    'sku',\n                    'sizes'\n                ],\n                active: true,\n                ...createFilterParams(req)\n            };\n\n            next();\n        })\n        .get(callback);\n\n    // Filter\n    server\n        .route(API_PATH + '/filter')\n        .all((req, res, next) => {\n            req.modelPath = '/products';\n            req.interface = [];\n            req.constParams = {\n                fields: [\n                    'category_index'\n                ],\n                active: true,\n                limit: -1,\n                ...createFilterParams(req)\n            };\n\n            next();\n        })\n        .get(callback);\n\n    // Product\n    server\n        .route(API_PATH + '/product')\n        .all((req, res, next) => {\n            req.modelPath = '/products';\n            req.interface = [\n                'slug'\n            ];\n            req.constParams = {\n                fields: [\n                    'variants',\n                    'categories',\n                    'manufacturer_name',\n                    'currency',\n                    'description',\n                    'summary',\n                    'id',\n                    'images',\n                    'name',\n                    'options',\n                    'price',\n                    'runway',\n                    'season',\n                    'slug',\n                    'sku',\n                    'sizes',\n                    'recommended_products'\n                ],\n                active: true,\n                expand: [\n                    'variants',\n                    'categories.parent',\n                    'recommended_products.product.categories.parent'\n                ]\n            };\n\n            next();\n        })\n        .get(callback);\n\n    // User\n    server\n        .route(API_PATH + '/accounts*')\n        .all((req, res, next) => {\n            req.modelPath = req.path.replace('/api', '');\n            req.interface = [\n                'email',\n                'facebook_id',\n                'first_name',\n                'phone',\n                'shipping'\n            ];\n\n            next();\n        })\n        .get((req, res, next) => {\n            const pathParams = trim(req.modelPath, '/').split('/');\n\n            if (pathParams[1] || req.query && req.query.password_reset_code) {\n                callback(req, res, next);\n            } else {\n                res.send('Cannot GET ' + req.path);\n            }\n        })\n        .post(callback)\n        .put(callback);\n\n    // Cart\n    server\n        .route(API_PATH + '/carts*')\n        .all((req, res, next) => {\n            req.modelPath = req.path.replace('/api', '');\n\n            next();\n        })\n        .get((req, res, next) => {\n            const pathParams = trim(req.modelPath, '/').split('/');\n\n            req.constParams = {\n                expand: [\n                    'items.product',\n                    'items.variant'\n                ]\n            };\n\n            if (pathParams[1]) {\n                callback(req, res, next);\n            } else {\n                res.send('Cannot GET ' + req.path);\n            }\n        })\n        .post(callback)\n        .delete(callback);\n\n    // Order\n    server\n        .route(API_PATH + '/orders*')\n        .all((req, res, next) => {\n            req.interface = [\n                'account_id',\n                'cart_id',\n                'order_number',\n                'shipping',\n                'items',\n                'first_name',\n                'phone',\n                'email',\n                'comments'\n            ];\n            req.constParams = {\n                closed: 'false'\n            };\n            req.modelPath = req.path.replace('/api', '');\n\n            next();\n        })\n        .get((req, res, next) => {\n            if (req.query && req.query.account_id) {\n                callback(req, res, next);\n            } else {\n                res.send('Missing required parameter \"account_id\".');\n            }\n        })\n        .post(callback);\n}\n\nexport default store;\n\n\n\n// WEBPACK FOOTER //\n// ./servers/api/middleware/store.js","const\n    servers = {\n        api: {\n            PORT: process.env.PORT || 4001\n        },\n        static: {\n            HOST: process.env.HOST || 'http://localhost',\n            PORT: process.env.PORT || 5000\n        }\n    };\n\nexport default servers;\n\n\n\n// WEBPACK FOOTER //\n// ./servers/config.js","const statusCodes = {\n    OK: 200,\n    BAD_REQUEST: 400,\n    PAGE_NOT_FOUND: 404,\n    INTERNAL_ERROR: 500\n};\n\nexport default statusCodes;\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/statusCodes.js","export function buildEmailBodyMarkup({ subject, html }) {\n    return (\n    `Subject: ${subject}\nAccept-Language: en-US\nContent-Language: en-US\nContent-Type: multipart/mixed; boundary=\"boundary\"\nMIME-Version: 1.0\n\n--boundary\nContent-Type: text/html; charset=\"utf-8\"\nContent-Transfer-Encoding: base64\n${new Buffer(html).toString('base64')}`\n    );\n}\n\nexport function buildEmailAttachmentMarkup({\n    attachmentName,\n    content\n}) {\n    return (\n        `\n\n--boundary\nContent-Type: application/pdf; name=\"${attachmentName}\"\nContent-Description: ${attachmentName}\nContent-Disposition: attachment; filename=\"${attachmentName}\";\nContent-Transfer-Encoding: base64\n${content}\n`\n    );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/email.js","module.exports = require(\"apicache\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"apicache\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"aws-sdk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"aws-sdk\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/classCallCheck\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/createClass\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/typeof\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/typeof\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"handlebars\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"handlebars\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"html-pdf\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"html-pdf\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"moment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"schema-client\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"schema-client\"\n// module id = 30\n// module chunks = 0"],"sourceRoot":""}